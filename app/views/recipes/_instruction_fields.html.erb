<div class="field">
  <%#= l.collection_select(:ingredient, Ingredient.all, :id, :name, {}, {:multiple => true, :size => 0}) %>
  <%#= l.select :ingredients, Ingredient.all.collect(&:name), {include_blank: true}, { multiple: true} %>

  <% if action == "edit" %>
    <% f.object.recipe_instructions.each do |recipe_instruction| %>
      <%= select_tag 'Instruction', options_for_select(Instruction.all.collect{ |u| [u.short_hand_name, u.id.to_s]}, recipe_instruction.instruction_id), include_blank: true, multiple: true %>
      <%= select_tag 'Order', options_for_select((1..100), recipe_instruction.order), include_blank: true, multiple: true %>
    <% end %>
  <% else %>
    <div>
      <%= f.label "Instruction name and order" %>
      <%= select_tag 'Instruction', options_for_select(Instruction.all.collect{ |u| [u.short_hand_name, u.id.to_s]}), include_blank: true, multiple: true %>
      <%= select_tag 'Order', options_for_select(1..100), include_blank: true, multiple: true %>
    </div>
  <% end %>
</div>